# otelconfluent - —ç—Ç–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ https://github.com/etf1/opentelemetry-go-contrib
# –≤–æ–∑–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—é —Ñ–æ—Ä–∫ –∏ –ø–æ–¥–ø—Ä–∞–≤–ª—é –µ–≥–æ –≤ –¥—Ä—É–≥–æ–π —Ä–µ–ø–µ. –ü–æ–¥—Ä–æ–±–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –ø–∞—á–∫–µ. 

# SSO  - –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

–ï–¥–∏–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–°–ê) –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ 

## –ó–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω—ã–π  
```bash
cd commands && task local
```

### –ù–∞ –î–µ–º–æ —Å—Ç–µ–Ω–¥–µ
```bash
cd commands && task demo
```

### –¢–µ—Å—Ç–æ–≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö
 
```bash
cd commands && task integration-tests 
```

### –Æ–Ω–∏—Ç –¢–µ—Å—Ç–æ–≤
```bash
cd commands && task unit-tests 
```

## Swagger grpc –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
http://localhost:44044/sw/

## Swagger http –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
http://localhost:8000/swagger/index.html

## Grafana
http://localhost:3000/grafana/
–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –º–µ—Ç—Ä–∏–∫, –≤ –ø–∞–ø–∫–µ monitoring –ª–µ–∂–∏—Ç dashboard  - 6671_rev2.json

## Prometheus
http://localhost:9090/targets/

## Kafka UI
http://localhost:8080

##  metrics
http://localhost:8000/metrics 


----------------------------------------------------
–ë–£–î–ï–¢ –ü–ï–†–ï–ü–ò–°–ê–ù–û. –í –†–ê–ë–û–¢–ï.
## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è 

### API:
HTTP-handlers –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å frontend, –∞ gRPC –¥–ª—è –æ–±—â–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤.
* gRPC: gRPC –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Protobuf –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–µ
–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å JSON (–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –≤ HTTP), —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
—Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏.
* HTTP: HTTP, —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –¥–ª—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –ø—Ä–æ—Å—Ç—ã–º –∏ –ª–µ–≥–∫–∏–º –¥–ª—è
–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å frontend-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏.


### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –≤—ã–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–æ–≤

–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ä–∞–∑—É –≤—ã–¥–∞–µ—Ç access –∏ refresh —Ç–æ–∫–µ–Ω—ã, –º–∏–Ω—É—è —ç—Ç–∞–ø –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞—á–∞—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Å–µ—Ä–≤–∏—Å–æ–º –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Patroni –∫–ª–∞—Å—Ç–µ—Ä–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Patroni –∫–ª–∞—Å—Ç–µ—Ä, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –≤—ã—Å–æ–∫—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∑–∞ —Å—á–µ—Ç —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏.

### 3. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ –∫–æ–Ω–µ—á–Ω–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å

–†–µ–ø–ª–∏–∫–∞—Ü–∏—è –≤ Patroni –∫–ª–∞—Å—Ç–µ—Ä–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –≤–µ–¥—É—â–∏–º —É–∑–ª–æ–º –∏ —Ä–µ–ø–ª–∏–∫–∞–º–∏. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ, –¥–∞–Ω–Ω—ã–µ –æ –Ω–æ–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–ø–ª–∏–∫–µ –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

### 4. –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –∑–∞–¥–µ—Ä–∂–∫–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏

–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–æ–≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ 15 –º–∏–Ω—É—Ç, —á—Ç–æ, –∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç—Å—è, –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –Ω–∞ –≤—Å–µ —Ä–µ–ø–ª–∏–∫–∏.

### 5. –í—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –∏ –µ–µ –≤–ª–∏—è–Ω–∏–µ

–í—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–µ–ø–ª–∏–∫–∞—Ö, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —è–≤–ª—è–µ—Ç—Å—è –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —è–≤–ª–µ–Ω–∏–µ–º. –û–Ω–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ç–æ–º—É, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å–º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –Ω–æ —ç—Ç–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π, —Ç–∞–∫ –∫–∞–∫ –∫ –º–æ–º–µ–Ω—Ç—É –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–æ–≤, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞.

### 6. –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î –∑–∞ —Å—á–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–ø–ª–∏–∫

–ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å —Ä–µ–ø–ª–∏–∫, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –≤–µ–¥—É—â–∏–π —É–∑–µ–ª. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.

### 7. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –∑–∞–¥–µ—Ä–∂–∫–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –≤ —à—Ç–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ –Ω–µ–≤–µ–ª–∏–∫–∞, –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Å–µ—Ç—å—é –æ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ç–∞–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ –º–∞–ª–∞, —Ç–∞–∫ –∫–∞–∫ —Å–∏–ª—å–Ω–æ–µ –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ —Ä–µ–ø–ª–∏–∫–∏ –≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–π —Å–∏—Å—Ç–µ–º–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Ä–µ–¥–∫–æ.

### 8. –ö–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å—é

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–ª–∏–∫ –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ä–∞–∑—É–º–Ω—ã–π –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å—é. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ä–∏—Å–∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏, —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –∏ —É–ª—É—á—à–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç.


## –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Kafka –∏ —Å—Ç–∞—Ç—É—Å–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π

–°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Apache Kafka –≤ –∫–∞—á–µ—Å—Ç–≤–µ —à–∏–Ω—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, —Å–µ—Ä–≤–∏—Å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π Kafka-—Ç–æ–ø–∏–∫.

–ü—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π:

1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è: –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.
2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞: –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Kafka-—Ç–æ–ø–∏–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, —Ç.–µ. —Å–µ—Ä–≤–∏—Å –Ω–µ –∂–¥–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.
3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–æ–æ–±—â–µ–Ω–∏—è: –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Kafka, —Å–µ—Ä–≤–∏—Å –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å "inProgress", —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É—è –æ —Ç–æ–º, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∞ –±—ã–ª–∞ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∞.
4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç Kafka: –û—Ç–¥–µ–ª—å–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ (coroutine) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–Ω–∞–ª –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç Kafka, –ø–æ–ª—É—á–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å–ø–µ—à–Ω–æ–π –∏–ª–∏ –Ω–µ—É–¥–∞—á–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–æ–æ–±—â–µ–Ω–∏—è: –í —Å–ª—É—á–∞–µ —É—Å–ø–µ—à–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è, –≥–æ—Ä—É—Ç–∏–Ω–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ "Success".

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

1. –°–µ—Ä–≤–∏—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–µ—Ä–≤–∏—Å –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Kafka-—Ç–æ–ø–∏–∫.
2. –°–µ—Ä–≤–∏—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π: –ü–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ —Ç–æ–ø–∏–∫. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–º—É –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
3. –°–µ—Ä–≤–∏—Å –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∞–ª–ª–æ–≤ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏: –ü–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ —Ç–æ–ø–∏–∫. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –Ω–∞—á–∏—Å–ª—è–µ—Ç –µ–º—É –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∞–ª–ª—ã.

## –í—ã–±–æ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–º —á–µ—Ä–µ–∑ Kafka

–î–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ —á–µ—Ä–µ–∑ Kafka –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö protobuf. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ–º –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å 
json —è–≤–ª—è–µ—Ç—Å—è —Å–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–ª-–≤–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –±–∞–π—Ç (—Å–º. –í—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ–¥–¥–µ—Ä–∂–∫–∞. –ê–≤—Ç–æ—Ä
–ú–∞—Ä—Ç–∏–Ω –ö–ª–µ–ø–ø–º–∞–Ω). 

–ë—ã–ª–æ –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –±—Ä–æ–∫–µ—Ä Kafka —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º   Schema Registry.  Schema Registry - —ç—Ç–æ —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å 
–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ö–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ Kafka. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç:
* –£–ø—Ä–∞–≤–ª—è—Ç—å –≤–µ—Ä—Å–∏—è–º–∏ —Å—Ö–µ–º: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è, –∏–∑–º–µ–Ω—è—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ç.–¥. –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.
* –ü—Ä–æ–≤–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ: Schema Registry –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –≤ Kafka, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ö–µ–º–µ.
* –£–ø—Ä–æ—Å—Ç–∏—Ç—å –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é: –ü–æ–ª—É—á–∞—Ç–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Schema Registry –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π —Å—Ö–µ–º—ã –¥–ª—è –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏—Å—å –¥–≤–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ go. [Kafka-go](https://github.com/segmentio/kafka-go) –∏ [–°onfluent-kafka-go](https://github.com/confluentinc/confluent-kafka-go).
Kafka-go –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Schema Registry https://github.com/segmentio/kafka-go/issues/728#issuecomment-909690992 –∏ https://github.com/segmentio/kafka-go/issues/728#issuecomment-2221492034. 
–ß—Ç–æ–±—ã –Ω–µ  —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Schema Registry –ø—Ä–∏–Ω—è—Ç–Ω–æ —Ä–µ—à–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –°onfluent-kafka-go.

–ö—Ä–∞—Ç–∫–æ:

* Schema Registry - —ç—Ç–æ —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ö–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤ Kafka. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º:
    * –£–ø—Ä–∞–≤–ª—è—Ç—å –≤–µ—Ä—Å–∏—è–º–∏ —Å—Ö–µ–º: –í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è, –∏–∑–º–µ–Ω—è—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ç.–¥. –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.
    * –ü—Ä–æ–≤–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ: Schema Registry –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –≤ Kafka, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ö–µ–º–µ.
    * –£–ø—Ä–æ—Å—Ç–∏—Ç—å –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é: –ü–æ–ª—É—á–∞—Ç–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Schema Registry –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π —Å—Ö–µ–º—ã –¥–ª—è –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

* Kafka-go - —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Golang –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Kafka.

* –ü—Ä–æ–±–ª–µ–º–∞: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ Kafka-go –Ω–µ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Schema Registry. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Schema Registry –≤—Ä—É—á–Ω—É—é.


## –°–µ–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î 
–í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, —Å–æ—Å—Ç–æ—è—â–µ–π –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É–∑–ª–æ–≤, –Ω–∞–≥—Ä—É–∑–∫–∞ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è. –ü—Ä–∏—á–∏–Ω—ã:

* –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤: –¢—Ä–µ–±—É—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.
* –†–æ—Å—Ç –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö: –ù–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–∂–µ—Å—Ç–∫–∏–µ –¥–∏—Å–∫–∏, –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å).
* –°–±–æ–∏ —É–∑–ª–æ–≤: –î—Ä—É–≥–∏–µ —É–∑–ª—ã –±–µ—Ä—É—Ç –Ω–∞ —Å–µ–±—è –Ω–∞–≥—Ä—É–∑–∫—É –≤—ã–±—ã–≤—à–µ–≥–æ —É–∑–ª–∞.

–£ –º–µ–Ω—è —Å–¥–µ–ª–∞–Ω–æ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏. –ü–∞—Ä—Ç–∏—Ü–∏–∏ —Å–¥–µ–ª–∞–ª –ø–æ email (—É –º–µ–Ω—è –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∑–∞–≤—è–∑–∞–Ω—ã –Ω–∞ email One of the most critical design decisions will be the column or columns by which you partition your data. Often the best choice will be to partition by the column or set of columns which most commonly appear in WHERE clauses of queries being executed on the partitioned table https://www.postgresql.org/docs/current/ddl-partitioning.html#DDL-PARTITIONING-DECLARATIVE-BEST-PRACTICES).  –ü–∏—à—É –≤—Å–µ–≥–¥–∞ –≤ –º–∞—Å—Ç–µ—Ä, —á–∏—Ç–∞—é –∏–∑ —Å–ª–µ–π–≤–æ–≤. –ü–∞—Ä—Ç–∏—Ü–∏–∏, –∑–∞ —Å—á–µ—Ç —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º –∏–∑ —Å–ª–µ–π–≤–æ–≤.  –ü–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ª–∏ –∫–∞–∫–∞—è-—Ç–æ –ø–µ—Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –≤ –±—É–¥—É—â–µ–º? –î—É–º–∞—é –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è —á—Ç–æ —á–∞—Å—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏–π –±—É–¥–µ—Ç –±–æ–ª–µ–µ –≥–æ—Ä—è—á–∏–º–∏.

–ü–µ—Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –¥–æ–ª–∂–Ω–∞:
1. –û–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏: –ü–æ—Å–ª–µ –ø–µ—Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∞ (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å) –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ø–æ –≤—Å–µ–º —É–∑–ª–∞–º. (—ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–æ–º –±—É–¥–µ—Ç –∑–∞ —Å—á–µ—Ç —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ —á—Ç–Ω–µ–∏—è –∏–∑ —Ä–µ–ø–ª–∏–∫,  —Ä–∞–∑–≤–µ —á—Ç–æ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–µ–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–∫–∞—Ç—å.)
2. –û–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –¥–æ—Å—Ç—É–ø–Ω–æ–π –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏.
3. –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∏ —É–º–µ–Ω—å—à–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ç—å –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–∏—Ü–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—Å—å –±—ã —á–∞—Å—Ç–∏—á–Ω–æ –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ —á–∞—Å—Ç–∏—á–Ω–æ –Ω–∞ –¥—Ä—É–≥–æ–π, —Ç–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã  —Å–æ–∑–¥–∞—Ç—å –Ω–∞–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –ø–∞—Ä—Ç–∏—Ü–∏–π, —á–µ–º —É–∑–ª–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ, –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫—É –ø–∞—Ä—Ç–∏—Ü–∏–π –Ω–∞ –∫–∞–∂–¥—ã–π —É–∑–µ–ª.  
–ö–ª–∞—Å—Ç–µ—Ä –∏–∑ 3—Ö —É–∑–ª–æ–≤ (–º–∞—Å—Ç–µ—Ä –∏ –¥–≤–∞ —Å–ª–µ–π–≤–∞) –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –±—ã–ª–æ –±—ã  –Ω–∞ 1000 –ø–∞—Ä—Ç–∏—Ü–∏–π. –¢–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ–º—ã–π –≤ –∫–ª–∞—Å—Ç–µ—Ä –Ω–æ–≤—ã–π —É–∑–µ–ª –º–æ–∂–µ—Ç –≤–∑—è—Ç—å –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫—É –ø–∞—Ä—Ç–∏—Ü–∏–π —É –∫–∞–∂–¥–æ–≥–æ –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É–∑–ª–æ–≤ –Ω–∞ –≤—Ä–µ–º—è, –¥–æ —Ç–µ—Ö –ø–æ—Ä –ø–æ–∫–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –Ω–µ —Å—Ç–∞–Ω—É—Ç —Å–Ω–æ–≤–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ. –ú–µ–∂–¥—É —É–∑–ª–∞–º–∏ –ø–µ—Ä–µ–º–µ—â–∞–ª–∏—Å—å –±—ã —Ç–æ–ª—å–∫–æ –ø–∞—Ä—Ç–∏—Ü–∏–∏ —Ü–µ–ª–∏–∫–æ–º. –ò—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ  –Ω–µ –º–µ–Ω—è–ª–æ—Å—å –±—ã, –∫–∞–∫ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–ª—é—á–µ–π –ø–∞—Ä—Ç–∏—Ü–∏—è–º. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ –º–µ–Ω—è–ª–æ—Å—å –±—ã -
—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Ö –ø–æ —É–∑–ª–∞–º.  –ù–æ –∑–∞ —Å—á–µ—Ç —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ —Å–º—ã—Å–ª–∞ –≤ —ç—Ç–æ–º –Ω–µ—Ç.

–¢–æ–≥–¥–∞ –Ω–∞–¥–æ —Å–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –Ω–∞–≥—Ä–∑—É–∫–µ –Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏—é –∏ —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–∞—Å—Ç–µ—Ä–µ. –ò —Ä–µ–ø–ª–∏–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—è—Ç —ç—Ç–∏ –∏–º–µ–Ω–µ–Ω–∏—è. –ú–æ–∂–Ω–æ –ª–∏ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –Ω–µ –±–ª–∞–∫–∏—Ä—É—è —Ä–∞–±–æ—Ç—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π? –ù–∞–ø—Ä–∏–º–µ—Ä —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞ —Ä–µ–ø–ª–∏–∫–µ (–≤—ã–∫–ª—é—á–∏–≤ –µ–µ –∏–∑ –∫–ª–∞—Å—Ç–µ—Ä–∞) –∏ –ø–æ–¥–Ω—è—Ç—å –µ–µ –¥–æ –º–∞—Å—Ç–µ—Ä–∞. –ù–æ —Ç–æ–≥–¥–∞ –ø–æ—Ç–µ—Ä—è–µ–º —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∑–∞–ø–∏—Å–∞–Ω—ã –≤ –º–∞—Å—Ç–µ—Ä –≤–æ –≤—Ä–µ–º—è —Ç–æ–≥–æ, –∫–∞–∫ –º—ã –¥–µ–ª–∞–ª–∏ —Ä–µ–ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.
5. ################################################################################################## 

cd authloyalty/protos/proto/registration
protoc --go_out=. registration.proto

easyjson -all /home/alex/Dev/GolandYandex/authloyalty/internal/handlersapi/v1/sso_handlers_response.go


```bash
curl --header "Content-Type: application/json" --request POST --data '{"email":"test@test.com","password":"test"}' http://localhost:8000/auth/login
```

```bash
curl --header "Content-Type: application/json" --request POST --data '{"email":"test@test.com","password":"test"}' http://localhost:8000/auth/registration
```

```bash
curl --header "Content-Type: application/json" --request POST --data '{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InRlc3RAdGVzdC5jb20iLCJleHAiOjE3MjI0MzIwODMsInRva2VuX3R5cGUiOiJhY2Nlc3MiLCJ1aWQiOjJ9.J6XilG2yEAM611yybY8LdvXs046yrx8bjCoWlwd5dtQ"}' http://localhost:8000/auth/logout
```

// HOW TO ADD GRPC SWAGGER
https://apidog.com/articles/how-to-add-swagger-ui-for-grpc/

1. download buf bin from github
2. rename to buf
3. move to /usr/bin
4. chmod +x buf
5. buf generate 

if Failure: plugin openapiv2: could not find protoc plugin for name openapiv2 - please make sure protoc-gen-openapiv2 is installed and present on your $PATH
```bash
go install \
    github.com/grpc-ecosystem/grpc-gateway/v2/protoc-gen-grpc-gateway \
    github.com/grpc-ecosystem/grpc-gateway/v2/protoc-gen-openapiv2 \
    google.golang.org/protobuf/cmd/protoc-gen-go \
    google.golang.org/grpc/cmd/protoc-gen-go-grpc
```

# redis sentinel
https://redis.uptrace.dev/guide/go-redis-sentinel.html#redis-server-client

# auth swagger
http://localhost:8000/swagger/index.html

```
swag init -g ./cmd/sso/main.go -o ./cmd/sso/docs
```

if err when starts 

Golang swaggo rendering error: "Failed to load API definition" and "Fetch error doc.json" [closed]
Where the routers locate
n most cases, the problem is that you forgot to import the generated docs as _ "<your-project-package>/docs" 
in my case
_ "github.com/AlexBlackNn/authloyalty/cmd/sso/docs"


metrics
https://stackoverflow.com/a/65609042
https://github.com/prometheus/client_golang
https://grafana.com/oss/prometheus/exporters/go-exporter/#metrics-usage

// otel instrumentation
https://github.com/open-telemetry/opentelemetry-go-contrib/tree/main/instrumentation#new-instrumentation
https://github.com/open-telemetry/opentelemetry-go-contrib/blob/main/instrumentation/github.com/gin-gonic/gin/otelgin/example/server.go
https://github.com/confluentinc/confluent-kafka-go/issues/712
https://github.com/etf1/opentelemetry-go-contrib

// kafka health check
https://github.com/confluentinc/confluent-kafka-go/discussions/1041

# using confluent-kafka-go
https://stackoverflow.com/a/55106860
CGO_ENABLED=0 can't be used, so dynamic links
https://github.com/confluentinc/confluent-kafka-go/issues/303?ysclid=lzrc7rstfd681525235#issuecomment-530566274
https://stackoverflow.com/a/69030479
https://github.com/confluentinc/confluent-kafka-go/issues/461

https://stackoverflow.com/questions/37630274/what-do-these-go-build-flags-mean-netgo-extldflags-lm-lstdc-static
https://blog.hashbangbash.com/2014/04/linking-golang-statically/ 



–†–µ—à–∞–µ—Ç—Å—è —Ñ–ª–∞–≥–∞–º–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ. –ü–æ–ª—É—á–∏–≤—à–∏–π—Å—è –æ–±—Ä–∞–∑ —Å—Ç–∞–ª 68 –ú–ë, —á—Ç–æ —Ä–∞–¥—É–µ—Ç –ø—Ä–æ—Ç–∏–≤ 890–ú–ë –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ ü§Ø

RUN GOOS=linux go build -ldflags '-extldflags "-static"' -o main ./cmd/sso/main.go

Do not link against shared libraries. This is only meaningful on platforms for which shared libraries are supported. The different variants of this option are for compatibility with various systems. You may use this option multiple times on the command line: it affects library searching for -l options which follow it. This option also implies --unresolved-symbols=report-all. This option can be used with -shared. Doing so means that a shared library is being created but that all of the library's external references must be resolved by pulling in entries from static libraries.
https://github.com/ko-build/ko/issues/756#issue-1298084220

githubassets.com
Build with -extldflags="-static" by default ¬∑ Issue #756 ¬∑ ko-build/ko ¬∑ GitHub

-extldflags flags Set space-separated flags to pass to the external linker. from https://pkg.go.dev/cmd/link -static Do not link against shared libraries. This is only meaningful on platforms for which shared libraries are supported. The...

–í–æ—Ç –µ—â–µ –∫—Ä—É—Ç–æ–π —Ç—É—Ç–æ—Ä–∏–∞–ª –Ω–∞—à–µ–ª https://blog.hashbangbash.com/2014/04/linking-golang-statically/ –ò–∑ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ  ldd –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ—é—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∏–ª–∏ –Ω–µ—Ç –ª–∏–Ω–∫–æ–≤–∫–∞. –ò —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ " go build --ldflags '-extldflags "-static"' ./code-cgo.go"

https://stackoverflow.com/a/76177689 -  –∞ –≤ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ —É –º–µ–Ω—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ –¥–æ–±–∞–≤–∫–∞ -tags musl

GOOS=linux go build -tags musl -o main ./cmd/sso/main.go

/snap/go/10660/pkg/tool/linux_amd64/link: running gcc failed: exit status 1
/usr/bin/ld: /home/alex/go/pkg/mod/github.com/confluentinc/confluent-kafka-go@v1.9.2/kafka/librdkafka_vendor/librdkafka_musl_linux.a(rdkafka_admin.o): in function `rd_kafka_CreateTopicsResponse_parse':
(.text+0x730): undefined reference to `strlcpy'
/usr/bin/ld: (.text+0x834): undefined reference to `strlcpy'
/usr/bin/ld: (.text+0xcef): undefined reference to `strlcpy'
/usr/bin/ld: (.text+0xe7d): undefined reference to `strlcpy'
/usr/bin/ld: (.text+0x1014): undefined reference to `strlcpy'


docker compose -f docker-compose.prod.yaml build --progress=plain --no-cache
docker compose -f docker-compose.prod.yaml up


metrics - 4 golden signals
https://github.com/slok/go-http-metrics?tab=readme-ov-file#benchmarks 

### kafka tracing transfer 

https://stackoverflow.com/a/78329944
https://opentelemetry.io/docs/demo/architecture/
https://github.com/open-telemetry/opentelemetry-demo/tree/e5c45b9055627795e7577c395c641f6cf240f054
https://github.com/open-telemetry/opentelemetry-demo/blob/e5c45b9055627795e7577c395c641f6cf240f054/src/checkoutservice/main.go#L527
https://www.youtube.com/watch?v=49fA7gQsDwA&t=2539s
https://www.youtube.com/watch?v=5rjTdA6BM1E
https://www.youtube.com/watch?v=UEwkn0iHDzA&list=PLNxnp_rzlqf6z1cC0IkIwp6yjsBboX945&index=1
## SSO

### NEED TO INSTALL
1. Protocol Buffer Compiler Installation
   https://grpc.io/docs/protoc-installation/#install-using-a-package-manager –ì

$ apt install -y protobuf-compiler
$ protoc --version  # Ensure compiler version is 3+

2. Install go plugins
   https://grpc.io/docs/languages/go/quickstart/

3. –ì–µ–Ω–µ—Ä–∏–º –∫–æ–¥:
   ~/GolandProjects/sso/protos$ protoc -I proto proto/sso/sso.proto --go_out=./gen/go --go_opt=paths=source_relative --go-grpc_out=./gen/go/ --go-grpc_opt=paths=source_relative
>>> ./gen/go/: No such file or directory

~/GolandProjects/sso/protos$
protoc -I proto proto/sso/sso.proto --go_out=. --go_opt=paths=source_relative --go-grpc_out=. --go-grpc_opt=paths=source_relative

–°–≥–µ–Ω–∏—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –ª–µ–∂–∞—Ç—å –≤ protos/gen/go/sso

4. –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å task
   https://taskfile.dev/api/
   sudo snap install task --classic

   –¥–∞–ª–µ–µ –ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–µ–º >>>  task generate
   alex@black:~/GolandProjects/sso/protos$ task generate
   task: [generate] protoc -I proto proto/sso/*.proto --go_out=./gen/go/ --go_opt=paths=source_relative --go-grpc_out=./gen/go/ --go-grpc_opt=paths=source_relative


auth swagger

http://localhost:8000/swagger/index.html

swag init -g ./cmd/sso/main.go -o ./cmd/sso/docs

if err when starts

Golang swaggo rendering error: "Failed to load API definition" and "Fetch error doc.json" [closed] Where the routers locate n most cases, the problem is that you forgot to import the generated docs as _ "/docs" in my case _ "github.com/AlexBlackNn/authloyalty/cmd/sso/docs"

metrics https://stackoverflow.com/a/65609042 https://github.com/prometheus/client_golang https://grafana.com/oss/prometheus/exporters/go-exporter/#metrics-usage